# Travel Budget Recommendations — current snapshot

This repository is a travel discovery app that estimates trip costs and recommends destinations that fit a user's budget. It focuses on clear, per-person cost estimates (hotels + daily costs by travel style) and fast, progressive discovery of destinations using an AI-backed pricing engine.

This `replit.md` file documents the current state (Oct 2025), how to run the app locally, notable recent changes, and suggested next steps.

## What this app does (today)
- Progressive search: backend progressively computes destination costs and the frontend polls for incremental results so users see recommendations as they arrive.
- Per-person cost estimates: hotel/night + daily costs are shown and compared on a per-person basis (the cost-comparison indicator remains per-person).
- Claude-based pricing: all price estimates (hotels, daily costs, flight placeholders) are generated using Claude AI with multi-layer caching and local fallbacks.
- Clean, modern city cards: hero images, improved price breakdown, accuracy badges (verified/estimated/approximate), and a cost comparison indicator (+/- % vs origin).
- Configurable flight inclusion: `VITE_SHOW_FLIGHT_COSTS` toggles whether flight costs are included in the card breakdown.

## Local setup and run (Windows PowerShell)

1) Install dependencies (project root)

```powershell
cd "C:\Users\CJohnson\OneDrive - Zinpro Corporation\Desktop\Project Files\travel-app-full"
npm ci
```

2) Start the backend (development mode)

```powershell
# server runs on port 5000 by default
npm run dev
```

3) Start the frontend (Vite)

```powershell
cd "C:\Users\CJohnson\OneDrive - Zinpro Corporation\Desktop\Project Files\travel-app-full"
npx vite
```

Open the local URL printed by Vite (typically http://localhost:5173 or 5174) to view the frontend. The backend will be serving on http://localhost:5000 by default.

Notes:
- To include flight costs in the UI set (in your environment where you run the frontend):

```powershell
# Example: temporarily in PowerShell
$env:VITE_SHOW_FLIGHT_COSTS = 'true'
npx vite
```

## Key files / entry points
- `client/` — Vite + React frontend
- `client/src/components/city-card.tsx` — main city card UI (hero image, price breakdown, cost-comparison)
- `server/` — backend TypeScript app (Express) that drives progressive search and Claude calls
- `vite.config.ts` — frontend build config (root set to `client`)

## Current architecture (Claude-only)

### Frontend 
- React + TypeScript + Vite for fast development and hot module replacement
- Shadcn/ui component library built on Radix UI primitives with Tailwind CSS
- TanStack Query (React Query) for server state management and caching
- Wouter for lightweight client-side routing

### Backend
- Node.js + Express.js with TypeScript
- Claude AI for all cost estimation (hotels, daily costs, flight estimates)
- Multi-layer caching with in-memory fallback (no Redis dependency)
- Progressive search with session-based polling

### Key decisions
- **No external travel APIs**: Amadeus and other paid APIs were removed to reduce cost and complexity
- **Claude-only pricing**: All estimates generated by Claude AI with local fallbacks and caching
- **Per-person baseline**: Cost comparisons remain per-person to avoid false precision for group scenarios

## Notable recent changes (October 2025)

- **Complete Amadeus removal**: Eliminated all external travel API dependencies; 99% cost reduction achieved
- **Frontend UI polish**: City cards updated with hero images, improved price breakdown, hover interactions
- **Badge cleanup**: Removed confusing value badges ("Good Value", "Great Value"); preserved accuracy indicators  
- **Cost comparison clarified**: Tooltip text clarifies comparisons are per-person to avoid user confusion
- **Session/polling fixes**: Frontend correctly receives cached results when available
- **Robust caching**: Multi-layer cache prevents costly external calls and stabilizes response times

## Environment variables (at a glance)

- Frontend (Vite require VITE_ prefix for client exposure):
  - `VITE_SHOW_FLIGHT_COSTS` (true/false) — whether to include flight costs in card breakdown
  - `VITE_API_URL` — backend base URL (optional; defaults to http://localhost:5000 in dev)

- Backend (set these securely on your host or in .env for local dev):
  - `CLAUDE_API_KEY` — API key used by the Claude pricing service
  - Cache/DB connection strings if you enable persistent cache or DB-backed features

Do NOT commit secrets to the repo.

## Quick smoke tests

- Run a search from the frontend and confirm that progressive results appear (you should see destinations streaming in).
- Verify city cards show hero images; if an image fails there should be a graceful gradient fallback.
- Toggle `VITE_SHOW_FLIGHT_COSTS` and confirm the flight column appears/disappears in the StatBox breakdown and the grid updates.

## Deployment notes (quick)

- Easiest/cheapest: host the frontend as a static site on Vercel or Netlify and host the backend on Render or Railway.
- For single-dashboard simplicity, Render can host both the static frontend (published `client/dist`) and the backend web service.
- Remember: frontend environment variables must be prefixed with `VITE_` and CORS must allow your frontend domain.

## Known limitations / intentionally deferred items

- Multi‑traveler cost autoscaling (couples/families): tabled for now — comparisons and UI remain per-person. This avoids false precision and complex assumptions about room sharing and child pricing.
- Activity-level badges and other preference-driven badges are deferred until we have a richer filter model (activity, travelers, seasonality) to produce meaningful, non-confusing labels.

## Next recommended steps

1. Add a small tooltip clarifying the cost-comparison is per-person (done in UI but double-check wording).
2. Add e2e smoke tests that run a search end-to-end against the dev backend and assert progressive results reach the frontend.
3. If/when you want group pricing: implement as an optional filter and keep comparisons per-person by default.
4. Prepare a small deploy guide (Vercel + Render) and move environment secrets into provider dashboards.

---

If you'd like, I can push this updated `replit.md` into the repo (create a commit message and PR) or generate exact deployment instructions for Vercel + Render with the exact field values to paste into their UI.
```markdown
# Travel Budget Recommendations — current snapshot

This repository is a travel discovery app that estimates trip costs and recommends destinations that fit a user's budget. It focuses on clear, per-person cost estimates (hotels + daily costs by travel style) and fast, progressive discovery of destinations using an AI-backed pricing engine.

This `replit.md` file documents the current state (Oct 2025), how to run the app locally, notable recent changes, and suggested next steps.

## What this app does (today)
- Progressive search: backend progressively computes destination costs and the frontend polls for incremental results so users see recommendations as they arrive.
- Per-person cost estimates: hotel/night + daily costs are shown and compared on a per-person basis (the cost-comparison indicator remains per-person).
- Claude-based pricing: all price estimates (hotels, daily costs, flight placeholders) are generated using Claude AI with multi-layer caching and local fallbacks.
- Clean, modern city cards: hero images, improved price breakdown, accuracy badges (verified/estimated/approximate), and a cost comparison indicator (+/- % vs origin).
- Configurable flight inclusion: `VITE_SHOW_FLIGHT_COSTS` toggles whether flight costs are included in the card breakdown.

## Local setup and run (Windows PowerShell)

1) Install dependencies (project root)

```powershell
cd "C:\Users\CJohnson\OneDrive - Zinpro Corporation\Desktop\Project Files\travel-app-full"
npm ci
```

2) Start the backend (development mode)

```powershell
# server runs on port 5000 by default
npm run dev
```

3) Start the frontend (Vite)

```powershell
cd "C:\Users\CJohnson\OneDrive - Zinpro Corporation\Desktop\Project Files\travel-app-full"
npx vite
```

Open the local URL printed by Vite (typically http://localhost:5173 or 5174) to view the frontend. The backend will be serving on http://localhost:5000 by default.

Notes:
- To include flight costs in the UI set (in your environment where you run the frontend):

```powershell
# Example: temporarily in PowerShell
$env:VITE_SHOW_FLIGHT_COSTS = 'true'
npx vite
```

## Key files / entry points
- `client/` — Vite + React frontend
- `client/src/components/city-card.tsx` — main city card UI (hero image, price breakdown, cost-comparison)
- `server/` — backend TypeScript app (Express) that drives progressive search and Claude calls
- `vite.config.ts` — frontend build config (root set to `client`)

## Notable recent changes (summary)

- Switched to Claude-only pricing pipeline
	- All pricing (hotels, daily costs) now generated by Claude AI with robust local fallbacks and caching.
	- Amadeus and other paid travel API integrations were removed to reduce cost and complexity.

- Frontend UI polish
	- City cards updated with hero images, improved price breakdown, and hover interactions.
	- Removed confusing value badges ("Good Value", "Great Value"); preserved accuracy badges and cost comparison indicator.

- Cost comparison behavior clarified
	- Comparison remains a per-person baseline (keeps consistency across destinations).
	- Tooltip text now clarifies comparisons are per-person to avoid user confusion when traveling in groups.

- Improved robustness and caching
	- Multi-layer cache (in-memory with fallback) used to prevent costly external calls and stabilize response times.
	- Session/polling bugs fixed so frontend correctly receives cached results when available.

## Environment variables (at a glance)

- Frontend (Vite require VITE_ prefix for client exposure):
	- `VITE_SHOW_FLIGHT_COSTS` (true/false) — whether to include flight costs in card breakdown
	- `VITE_API_URL` — backend base URL (optional; defaults to http://localhost:5000 in dev)

- Backend (set these securely on your host or in .env for local dev):
	- `CLAUDE_API_KEY` — API key used by the Claude pricing service
	- Cache/DB connection strings if you enable persistent cache or DB-backed features

Do NOT commit secrets to the repo.

## Quick smoke tests

- Run a search from the frontend and confirm that progressive results appear (you should see destinations streaming in).
- Verify city cards show hero images; if an image fails there should be a graceful gradient fallback.
- Toggle `VITE_SHOW_FLIGHT_COSTS` and confirm the flight column appears/disappears in the StatBox breakdown and the grid updates.

## Deployment notes (quick)

- Easiest/cheapest: host the frontend as a static site on Vercel or Netlify and host the backend on Render or Railway.
- For single-dashboard simplicity, Render can host both the static frontend (published `client/dist`) and the backend web service.
- Remember: frontend environment variables must be prefixed with `VITE_` and CORS must allow your frontend domain.

## Known limitations / intentionally deferred items

- Multi‑traveler cost autoscaling (couples/families): tabled for now — comparisons and UI remain per-person. This avoids false precision and complex assumptions about room sharing and child pricing.
- Activity-level badges and other preference-driven badges are deferred until we have a richer filter model (activity, travelers, seasonality) to produce meaningful, non-confusing labels.

## Next recommended steps

1. Add a small tooltip clarifying the cost-comparison is per-person (done in UI but double-check wording).
2. Add e2e smoke tests that run a search end-to-end against the dev backend and assert progressive results reach the frontend.
3. If/when you want group pricing: implement as an optional filter and keep comparisons per-person by default.
4. Prepare a small deploy guide (Vercel + Render) and move environment secrets into provider dashboards.

---

If you'd like, I can push this updated `replit.md` into the repo (create a commit message and PR) or generate exact deployment instructions for Vercel + Render with the exact field values to paste into their UI.

``` 